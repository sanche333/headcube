
<style>
	body {
		background-image: linear-gradient(to right top,#6b7bda,#6b7bda,#6b7bda,#6b7bda,#6b7bda,#847bd6,#977cd2,#a87dcd,#c582c2,#d88ab7,#e495af,#eaa3ab);
		background-size: auto 100vh;
		margin: 0;
	}
	#wm {
		width: 180px;
		image-rendering: pixelated;
		position: absolute;
		right: 12px;
		bottom: 12px;
		opacity: .3;
	}
</style>
<script src="./three.min.js"></script>
<script src="./OBJLoader.js"></script>

<body>
	<img id="wm" src="wm.png">
</body>

<script>
	const urlParams = new URLSearchParams(window.location.search);
	const bgs = {
			1: "to right top, #6b7bda, #6b7bda, #6b7bda, #6b7bda, #6b7bda, #847bd6, #977cd2, #a87dcd, #c582c2, #d88ab7, #e495af, #eaa3ab",
			2: "132deg, #F4D03F 0%, #16A085 100%",
			3: "45deg, #08AEEA 0%, #2AF598 100%",
			4: "43deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%",
			5: "-45deg, #FEE140 0%, #FA709A 100%",
			6: "45deg,#6340a2,#0b7373,#17dba3",
			7: "45deg,#fdb68b,#cb8b9f,#79738d",
			8: "45deg,#150c66,#bf495d,#f0cd84",
			9: "45deg, #000000,#292929,#525252"
		};
	document.body.style["background-image"] = "linear-gradient(" + bgs[urlParams.get("bg")] + ")";
	
	const mRot = {
			x: -.23,
			y: .6,
			z: .1
		};
	
	const scene = new THREE.Scene;
	const objLoader = new THREE.OBJLoader;
	const textureLoader = new THREE.TextureLoader;
	
	const camera = new THREE.PerspectiveCamera( 1, window.innerWidth / window.innerHeight, .1, 1e5);
		camera.position.z = 60;
	
	const renderer = new THREE.WebGLRenderer({ antialias: !1 });
		renderer.setSize(window.innerWidth, window.innerHeight);
		renderer.setClearColor(0, 0);
		renderer.shadowMap.enabled = !0;
		renderer.shadowMap.type = THREE.PCFSoftShadowMap;
		renderer.setPixelRatio(2);
	
	document.body.appendChild(renderer.domElement);
	
	const light = new THREE.DirectionalLight(15377323, 1);
		light.position.set(.4, 4, 6);
		light.castShadow = !0;
		light.shadow.radius = 1.6;
		light.shadow.blurSamples = 54;
		light.shadow.camera.far = 160;
		
	const ambient = new THREE.AmbientLight(6710886);
	
	objLoader.load("https://cdn.discordapp.com/attachments/1005551359812186185/1088695167793512498/headq.obj", function(e) {
		e.traverse(e => {
			if (e.isMesh) {
				e.material = new THREE.MeshPhongMaterial({
					map: skin,
					transparent: !0
				});
				const a = new THREE.Mesh(e.geometry, e.material);
					a.rotation.set(mRot.x, mRot.y, mRot.z)
					a.scale.set(1.05, 1.05, 1.05)
					a.castShadow = !0
					a.receiveShadow = !0
				scene.add(a)
			}
		})
	});
	const skinUrl = urlParams.get("skin");
	const skin = textureLoader.load(skinUrl, function(e) {
			objLoader.load("https://cdn.discordapp.com/attachments/1005551359812186185/1088717965219872838/hatq.obj", function(e) {
				e.traverse(e => {
					if (e.isMesh) {
						var a = new THREE.MeshPhongMaterial({
								map: skin,
								transparent: !0,
								side: THREE.DoubleSide
							}),
							t = new THREE.MeshPhongMaterial({
								map: skin,
								transparent: !0,
								side: THREE.DoubleSide,
								alphaMap: skin,
								alphaTest: 1e-4,
								opacity: 0
							}),
							n = new THREE.MeshDepthMaterial({
								depthPacking: THREE.RGBADepthPacking,
								map: skin,
								alphaTest: .3
							});
						const r = new THREE.Mesh(e.geometry, t);
							r.rotation.set(mRot.x, mRot.y, mRot.z);
							r.castShadow = !0;
							r.customDepthMaterial = n;
						const o = new THREE.Mesh(e.geometry, a);
							o.rotation.set(mRot.x, mRot.y, mRot.z);
						scene.add(o, r);
					}
				})
			})
		});
	function animate() {
		requestAnimationFrame(animate);
		renderer.render(scene, camera);
	}
	
	skin.magFilter = THREE.NearestFilter;
	
	scene.add(light, ambient);
	animate();
</script>
